# ssh-chat

SSH-CHAT server.  See https://github.com/shazow/ssh-chat to learn more.

## Demo Server

    $ ssh casmacc.plus -p 9000

## Building

    $ docker build . -t casmacc/ssh-chat

## Running 

    $ docker run -p 2022:2022 casmacc/ssh-chat

## SSH Client

From any terminal:

    $ ssh localhost -p 2022

## With Docker Compose

It is possible to start many instances of `ssh-chat` servers on one host, each
listening on a separate port. 

    version: '3'

    # to setup the network, run `docker network create proxynet`
    networks:
      default:
        external:
          name: proxynet
    
    services:
      chat-project1:
        image: casmacc/ssh-chat
        ports:
          - "9000:2022"
        restart: unless-stopped
      chat-project2:
        image: casmacc/ssh-chat
        ports:
          - "9001:2022"
        restart: unless-stopped
    
Then:

    TERMINAL1> ssh <server> -p 9000
    TERMINAL2> ssh <server> -p 9000
    TERMINAL3> ssh <server> -p 9001
    TERMINAL4> ssh <server> -p 9001

## SSH Keys

Container SSH Public Key is is in `/root/.ssh/id_rsa`.  SSH keys are
auto-generated by the startup script `/root/ssh-chat.sh`.

Note that if you destroy and regenerate the container, new SSH keys will be
created, and your SSH clients will complain.  To avoid this annoyance, either:

1) do not destroy the container - use start/stop instead.  OR...
2) save the .ssh directory in a volume, to make the keys persistent

    volume:
      - ./volume/ssh:/root/.ssh

